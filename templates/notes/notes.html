{% extends "base.html" %}
{% load static %}

{% block title %} Notes {% endblock %}

{% block content %}
    {% include 'notes/inclusions/add_note_modal.html' %}
    <div class="row">
        {% include 'notes/inclusions/note_card.html' with title="Note Title" text="Lorem ipsum dolor sit amet, consectetur adipisicing elit. A aliquam amet cumque delectus dolore dolorem earum eos est et excepturi id impedit incidunt ipsum laborum laudantium maiores molestiae nemo nisi odit pariatur quo recusandae reiciendis reprehenderit repudiandae sunt veniam vero voluptas voluptate voluptates, voluptatibus? Aliquam at nisi quam quibusdam repudiandae." created="2 days ago" %}
        {% include 'notes/inclusions/note_card.html' with title="Note Title" text="Test" created="2 days ago" %}
    </div>
{% endblock %}

{% block script %}
    <script>
        $(document).ready(function () {
            const $addNoteBtn = $("#addNoteBtn");
            const $removeNotesBtn = $("#removeNotesBtn");
            const $selectNoteBtn = $(".note__select-btn")

            function addNote() {

            }

            $addNoteBtn.click(addNote);

            function removeNotes() {
                const idsToRemove = [];
                const elementsToRemove = [];

                $(".selected-note").each(function () {
                    const $noteEl = $(this).parent();

                    elementsToRemove.push($noteEl);
                    idsToRemove.push($noteEl.data("noteId"))
                });

                elementsToRemove.forEach(function (el) {
                    el.addClass("animate__animated animate__bounceOut");

                    el.on("animationend", () => el.remove());
                });
            }

            $removeNotesBtn.click(removeNotes);

            function selectNote() {
                const $noteItem = $(this).closest('.note-item');
                $noteItem.toggleClass("selected-note");

                const $selectNoteBtn = $(this)

                if ($noteItem.hasClass("selected-note")) {
                    $selectNoteBtn.text("Unselect");
                } else {
                    $selectNoteBtn.text("Select");
                }
            }

            $selectNoteBtn.click(selectNote);

            function initialize() {
                hideLoading();
            }

            initialize();
        });
    </script>
{% endblock %}
